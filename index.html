<!DOCTYPE html>
<html>

<head>
  <title>map-2d-demo</title>
  <link href="/src/map.css" rel="stylesheet" />
  <script src="/src/Map2.js"></script>
  <script src="/src/util.js"></script>
</head>

<body>
</body>
<script>

  const map = new Map({
    target: 'map',
    url: 'http://mt1.google.cn/vt/lyrs=s&hl=zh-CN&x={x}&y={y}&z={z}'
  })

  // const url = 'http://mt1.google.cn/vt/lyrs=s&hl=zh-CN&x={x}&y={y}&z={z}';
  // const current = [0, 0, 0];
  // let target = 0;
  // const history = [];
  // let imgs = document.querySelectorAll('.map-container img');
  // // control();
  // // load();

  // function next(i) {
  //   if (current[0] >= 17) return;

  //   history.push(current.map((item) => item))
  //   current[0]++;
  //   if (i === 0) {
  //     current[1] = current[1] << 1;
  //     current[2] = current[2] << 1;
  //   }
  //   if (i === 1) {
  //     current[1] = (current[1] << 1) + 1;
  //     current[2] = current[2] << 1;
  //   }
  //   if (i === 2) {
  //     current[1] = current[1] << 1;
  //     current[2] = (current[2] << 1) + 1;
  //   }
  //   if (i === 3) {
  //     current[1] = (current[1] << 1) + 1;
  //     current[2] = (current[2] << 1) + 1;
  //   }
  //   load()
  // }

  // function control() {
  //   let container = document.getElementsByClassName('map-container')[0];
  //   let rect = container.getBoundingClientRect();
  //   container.addEventListener("mousewheel", (e) => {
  //     let deltaY = e.deltaY;
  //     if (deltaY > 0) {
  //       pop();
  //     } else {
  //       next(target);
  //     }
  //   })
  //   container.addEventListener("mousemove", (e) => {
  //     let left = (e.clientX - rect.left) / rect.width;
  //     let top = (e.clientY - rect.top) / rect.height;
  //     if (left < 0.5 && top < 0.5) target = 0;
  //     if (left >= 0.5 && top < 0.5) target = 1;
  //     if (left < 0.5 && top >= 0.5) target = 2;
  //     if (left >= 0.5 && top >= 0.5) target = 3;
  //   })
  // }

  // function pop() {
  //   if (history.length > 0) {
  //     let last = history.pop();
  //     current.forEach((i, idx) => {
  //       current[idx] = last[idx];
  //     })
  //     load()
  //   }
  // }

  // function load() {
  //   let z = current[0] + 1;
  //   let x = current[1] << 1;
  //   let y = current[2] << 1;
  //   for (let i = y, idx = 0; i <= y + 1; i++) {
  //     for (let j = x; j <= x + 1; j++, idx++) {
  //       let tile = url.replace('{z}', z).replace('{x}', j).replace('{y}', i);
  //       imgs[idx].src = tile;
  //     }
  //   }
  // }



</script>

</html>